# ESA CLI Init 命令快速测试指南

## 快速开始

### 1. 环境准备

```bash
# 确保 ESA CLI 已安装
esa --version

# 创建测试目录
mkdir init-test && cd init-test
```

### 2. 基础功能测试（5分钟）

#### 测试 1: 帮助信息

```bash
esa init --help
```

**预期结果**: 显示 init 命令的帮助信息

#### 测试 2: 项目名称验证

```bash
esa init A
```

**预期结果**: 显示错误信息"项目名称必须至少2个字符"

#### 测试 3: 指定项目名称

```bash
esa init test-project --skip
```

**预期结果**: 创建 test-project 目录

#### 测试 4: 自动确认模式

```bash
esa init --yes --skip
```

**预期结果**: 自动创建项目（名称格式：edge-routine-<timestamp>）

### 3. 交互式测试（10分钟）

#### 完整流程测试

```bash
esa init
```

**交互步骤**:

1. 输入项目名称（如：my-test-app）
2. 选择模板
3. 选择是否初始化 Git（Yes/No）
4. 选择是否部署（Yes/No）

**验证点**:

- [ ] 项目目录创建成功
- [ ] 模板文件复制完成
- [ ] 依赖安装成功（如果有 package.json）
- [ ] Git 初始化（如果选择）
- [ ] 部署成功（如果选择且已登录）

### 4. 错误处理测试（5分钟）

#### 测试目录冲突

```bash
mkdir conflict-test
esa init conflict-test
```

**预期结果**: 显示"项目已存在"错误

#### 测试无效模板

```bash
esa init test --template invalid-template
```

**预期结果**: 显示"模板未找到"错误

### 5. 多语言测试（3分钟）

#### 中文界面

```bash
esa lang zh_CN
esa init --help
```

**预期结果**: 显示中文帮助信息

#### 英文界面

```bash
esa lang en
esa init --help
```

**预期结果**: 显示英文帮助信息

## 自动化测试

### 运行完整测试脚本

```bash
# 给脚本执行权限
chmod +x scripts/test-init-command.sh

# 运行测试
./scripts/test-init-command.sh
```

### 测试结果示例

```
==========================================
    ESA CLI Init 命令测试开始
==========================================
[INFO] 检查 ESA CLI 是否可用...
[PASS] ESA CLI 可用
[INFO] 测试帮助信息...
[PASS] 帮助信息显示正确
[INFO] 测试项目名称验证...
[PASS] 项目名称验证 - 大写字母检测
[PASS] 项目名称验证 - 单个字符检测
[PASS] 项目名称验证 - 下划线检测
[INFO] 测试指定项目名称...
[PASS] 指定项目名称创建成功
[INFO] 测试 --yes 选项...
[PASS] --yes 选项自动生成项目名称
[INFO] 测试 --skip 选项...
[PASS] --skip 选项跳过交互
[INFO] 测试项目目录冲突...
[PASS] 项目目录冲突检测
[INFO] 测试模板不存在...
[PASS] 模板不存在检测
[INFO] 测试 --config 选项...
[PASS] --config 选项生成配置文件
[INFO] 测试多语言支持...
[PASS] 中文界面支持
[PASS] 英文界面支持
==========================================
    测试完成
==========================================
通过: 12
失败: 0
总计: 12
所有测试通过！
```

## 常见问题

### Q: 测试时提示"ESA CLI 未安装"

**A**: 确保已正确安装 ESA CLI 并在 PATH 中

### Q: 测试失败，提示权限错误

**A**: 确保有足够的权限创建目录和文件

### Q: 网络相关测试失败

**A**: 检查网络连接，某些测试需要下载依赖

### Q: 模板相关测试失败

**A**: 确保模板包已正确安装

## 测试报告模板

### 快速测试检查清单

| 测试项目     | 状态          | 备注 |
| ------------ | ------------- | ---- |
| 帮助信息显示 | ☐ 通过 ☐ 失败 |      |
| 项目名称验证 | ☐ 通过 ☐ 失败 |      |
| 指定项目名称 | ☐ 通过 ☐ 失败 |      |
| 自动确认模式 | ☐ 通过 ☐ 失败 |      |
| 交互式流程   | ☐ 通过 ☐ 失败 |      |
| 错误处理     | ☐ 通过 ☐ 失败 |      |
| 多语言支持   | ☐ 通过 ☐ 失败 |      |

### 问题记录

**问题描述**:
**复现步骤**:
**预期结果**:
**实际结果**:
**环境信息**:
**解决方案**:

## 联系支持

如果遇到问题，请：

1. 查看完整测试文档：`docs/init-command-test-guide.md`
2. 检查项目 Issues
3. 联系开发团队
